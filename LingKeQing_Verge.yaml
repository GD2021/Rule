#====================================================================================
# @ConfigName        LingKeQingå‚è€ƒå®ä¾‹é…ç½®
# @Author            @KissKeQing
# @Illustrate        æœ¬é…ç½®å‚è€ƒ @SukkaW å¤§ä½¬æå‡ºçš„åˆ†æµæ‰€å°è¯•è‡ªç”¨æµ‹è¯•çš„ Verge Rev ç‰ˆæœ¬è§„åˆ™
#                    éƒ¨åˆ†è§„åˆ™æ ¹æ®ä½œè€…ä½¿ç”¨éœ€æ±‚è¿›è¡Œäº†ä¸€äº›è°ƒæ•´ï¼Œæˆ‘ä¸å¯¹æœ¬è§„åˆ™ä»»ä½•éƒ¨åˆ†è´Ÿæœ‰è´£ä»»ï¼ˆé”šç‚¹éƒ¨åˆ†å†™çš„ç‰¹åˆ«çƒ‚ï¼‰
#                    æ‚¨ä¸åº”å½“å› ä¸ºæœ¬è§„åˆ™çš„å†…å®¹è€Œå»æ‰“æ‰° @SukkaW å¤§ä½¬ï¼Œå¤§éƒ¨åˆ†è§„åˆ™æ”¯æŒå¯ä»¥åœ¨
#                    blog.skk.moe/post/i-have-my-unique-surge-setup/ ä¸­å¯»å¾—
# @Thanks            @SukkaW @Semporia @blackmatrix7 @ACL4SSR     
#====================================================================================
port: 7890
socks-port: 7891
mixed-port: 7893
allow-lan: false
bind-address: "*"
mode: rule
log-level: info
ipv6: false
geo-update-interval: 24
find-process-mode: strict
external-controller: 127.0.0.1:9090

dns:
  enable: true
  ipv6: false
  listen: 0.0.0.0:53
  prefer-h3: true #å»ºè®® false é™¤éä½ çŸ¥é“è¿™æ˜¯ä»€ä¹ˆ
  enhanced-mode: fake-ip
  fake-ip-range: 198.18.0.1/16
  fake-ip-filter:
    - "*.lan"
    - localhost.ptlogin2.qq.com
    - +.srv.nintendo.net
    - +.stun.playstation.net
    - +.msftconnecttest.com
    - +.msftncsi.com
    - +.xboxlive.com
    - msftconnecttest.com
    - xbox.*.microsoft.com
    - "*.battlenet.com.cn"
    - "*.battlenet.com"
    - "*.blzstatic.cn"
    - "*.battle.net"
  default-nameserver:
    - 223.5.5.5
    - 119.29.29.29
  nameserver:
    - https://doh.pub/dns-query
    - https://dns.alidns.com/dns-query
  fallback:
    - https://cloudflare-dns.com/dns-query
    - https://dns.google/dns-query
  fallback-filter:
    geoip: true
    geoip-code: CN
    ipcidr:
      - 240.0.0.0/4


#========= å»ºç«‹é”šç‚¹ =========#
# ä»£ç†èŠ‚ç‚¹é€‰æ‹©ç»„
selected_proxy_group: &selected_proxy_group
  type: select
  proxies:
    - ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹
    - ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹
    - ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹
    - ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹ 
    - ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
    - ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹
    - ğŸ‡«ğŸ‡· æ³•å›½èŠ‚ç‚¹
    - ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹
    - ğŸ‡­ğŸ‡° HongKong
    - ğŸ‡¸ğŸ‡¬ Singapore
    - ğŸ‡¯ğŸ‡µ Japan
    - ğŸ‡ºğŸ‡² American 
    - ğŸ‡¨ğŸ‡³ Taiwan
    - ğŸ‡¬ğŸ‡§ England
    - ğŸ‡«ğŸ‡· France
    - ğŸ‡°ğŸ‡· Korea
    - DIRECT

# ï¼ˆèŠ‚ç‚¹ï¼‰èŠ‚ç‚¹è¿é€šæ€§æ£€æŸ¥ 
healthy_check_group: &healthy_check_group
  type: http
  interval: 86400
  health-check:
    enable: true
    url: http://www.gstatic.com/generate_204
    interval: 1800

# ï¼ˆèŠ‚ç‚¹é€‰æ‹©ï¼‰è‡ªåŠ¨é€‰æ‹©ä»£ç†
auto_select_group: &auto_select_group
  type: url-test
  lazy: true
  url: http://www.gstatic.com/generate_204
  interval: 900
  use:
    - Subscribe

# ï¼ˆèŠ‚ç‚¹é€‰æ‹©ï¼‰æ‰‹åŠ¨é€‰æ‹©ä»£ç†
manual_proxy_group: &manual_proxy_group
  type: select
  use:
    - Subscribe

# ä¼ ç»ŸHTTPä»£ç†èŠ‚ç‚¹ç»„
classical_http_group: &classical_http_group
  type: http
  behavior: classical
  interval: 86400

# åŸŸåHTTPä»£ç†èŠ‚ç‚¹ç»„
domain_http_group: &domain_http_group
  type: http
  behavior: domain
  interval: 86400

# IP/CIDR HTTPä»£ç†èŠ‚ç‚¹ç»„
ipcidr_http_group: &ipcidr_http_group
  type: http
  behavior: ipcidr
  interval: 86400
#========= é”šç‚¹ç»“æŸ =========#
proxy-providers:
  Subscribe:
    <<: *healthy_check_group
    url: # æœºåœºè®¢é˜…å¡«å†™åŒºåŸŸ
    path: ./proxy_providers/tmp.yaml

proxy-groups:
  - {name: Topic, <<: *selected_proxy_group}
  - {name: AllServer, <<: *manual_proxy_group}
  - {name: OpenAI, <<: *selected_proxy_group}
  - {name: bilibili, <<: *selected_proxy_group}
  - {name: GameHub, <<: *selected_proxy_group}
  - {name: Google, <<: *selected_proxy_group}
  - {name: Apple, <<: *selected_proxy_group}
  - {name: AIGC, <<: *selected_proxy_group}
  - {name: PayPal, <<: *selected_proxy_group}
  - {name: Telegram, <<: *selected_proxy_group}
  - {name: Twitter, <<: *selected_proxy_group}
  - {name: Netflix, <<: *selected_proxy_group}
  - {name: Youtube, <<: *selected_proxy_group}
  - {name: Stream, <<: *selected_proxy_group}
  - {name: OneDrive, <<: *selected_proxy_group}
  - {name: Speedtest, <<: *selected_proxy_group}
  - {name: Microsoft, <<: *selected_proxy_group}
  - {name: AdBlock, type: select, proxies: [REJECT]}

  - {name: â™»ï¸ è‡ªåŠ¨é€‰æ‹©, <<: *auto_select_group}
  - {name: ğŸ‡­ğŸ‡° é¦™æ¸¯èŠ‚ç‚¹, <<: *auto_select_group, filter: "æ¸¯|HK|(?i)Hong"}
  - {name: ğŸ‡¯ğŸ‡µ æ—¥æœ¬èŠ‚ç‚¹, <<: *auto_select_group, filter: "æ—¥|ä¸œäº¬|JP|(?i)Japan"}
  - {name: ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹, <<: *auto_select_group, filter: "å°|æ¹¾|TW|(?i)Taiwan"}
  - {name: ğŸ‡ºğŸ‡² ç¾å›½èŠ‚ç‚¹, <<: *auto_select_group, filter: "ç¾|US|(?i)States|American"}
  - {name: ğŸ‡¸ğŸ‡¬ ç‹®åŸèŠ‚ç‚¹, <<: *auto_select_group, filter: "æ–°|å¡|SG|(?i)Singapore"}
  - {name: ğŸ‡¬ğŸ‡§ è‹±å›½èŠ‚ç‚¹, <<: *auto_select_group, filter: "è‹±|UK|(?i)Britain|England"}
  - {name: ğŸ‡«ğŸ‡· æ³•å›½èŠ‚ç‚¹, <<: *auto_select_group, filter: "æ³•|FR|(?i)France"}
  - {name: ğŸ‡°ğŸ‡· éŸ©å›½èŠ‚ç‚¹, <<: *auto_select_group, filter: "éŸ©|KR|(?i)Korea"}
  - {name: ğŸ‡­ğŸ‡° HongKong, <<: *manual_proxy_group, filter: "æ¸¯|HK|(?i)Hong"}
  - {name: ğŸ‡¯ğŸ‡µ Japan, <<: *manual_proxy_group, filter: "æ—¥|ä¸œäº¬|JP|(?i)Japan"}
  - {name: ğŸ‡¨ğŸ‡³ Taiwan, <<: *manual_proxy_group, filter: "å°|æ¹¾|TW|(?i)Taiwan"}
  - {name: ğŸ‡ºğŸ‡² American, <<: *manual_proxy_group, filter: "ç¾|US|(?i)States|American"}
  - {name: ğŸ‡¸ğŸ‡¬ Singapore, <<: *manual_proxy_group, filter: "æ–°|å¡|SG|(?i)Singapore"}
  - {name: ğŸ‡¬ğŸ‡§ England, <<: *manual_proxy_group, filter: "è‹±|UK|(?i)Britain|England"}
  - {name: ğŸ‡«ğŸ‡· France, <<: *manual_proxy_group, filter: "æ³•|FR|(?i)France"}
  - {name: ğŸ‡°ğŸ‡· Korea, <<: *manual_proxy_group, filter: "éŸ©|KR|(?i)Korea"}

rule-providers:
  # å¤§éƒ¨åˆ†å€Ÿé‰´äº†ç‹ç‹çš„è§„åˆ™ï¼Œå°éƒ¨åˆ†åšäº†è°ƒæ•´
  Ad-Domain:
    <<: *domain_http_group
    format: text
    url: https://ruleset.skk.moe/List/domainset/reject.conf
    path: ./ruleset/anti-ad-domain.conf
  Ad-Rule:
    <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/reject.conf
    path: ./ruleset/anti-ad-rule.conf
  QUIC-Block:
    <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/reject-no-drop.conf
    path: ./ruleset/quic-block.conf
  Adobe-Block:
    <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/reject-drop.conf
    path: ./ruleset/adobe-block.conf
  CDN-Domain:
    <<: *domain_http_group
    format: text
    url: https://ruleset.skk.moe/List/domainset/cdn.conf
    path: ./ruleset/cdn-domain.conf
  CDN:
    <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/cdn.conf
    path: ./ruleset/cdn-nonip.conf
  Speedtest:
    <<: *domain_http_group
    format: text
    url: https://ruleset.skk.moe/List/domainset/speedtest.conf
    path: ./ruleset/speedtest.conf
  Stream:
    <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/stream.conf
    path: ./ruleset/stream.conf
  Telegram:
    <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/telegram.conf
    path: ./ruleset/telegram.conf
  Apple-CDN:
    <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/apple_cdn.conf
    path: ./ruleset/apple_cdn.conf
  Microsoft_CDN:
    <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/microsoft_cdn.conf
    path: ./ruleset/microsoft_cdn.conf
  Download-Domain:
    <<: *domain_http_group
    format: text
    url: https://ruleset.skk.moe/List/domainset/download.conf
    path: ./ruleset/download_Domain.conf
  Download:
    <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/download.conf
    path: ./ruleset/download_nonip.conf
  Apple-CN:
    <<: *domain_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/apple_cn.conf
    path: ./ruleset/apple-cn.conf
  Apple:
    <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/apple_services.conf
    path: ./ruleset/apple.conf
  Microsoft:
    <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/microsoft.conf
    path: ./ruleset/microsoft.conf
  # æ­¤å¤„è§„åˆ™æ¢æºè‡³ @blackmatrix7
  OpenAI:
    <<: *classical_http_group
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/OpenAI/OpenAI.yaml
    path: ./ruleset/OpenAI.yaml
  AIGC:
    <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/QingRex/Clash/main/AI.list
    path: ./ruleset/AI.list
  ### ä»¥ä¸‹è§„åˆ™ä¸ºä¸ªäººéœ€è¦æ·»åŠ 
  GoogleFCM:
    <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/GoogleFCM.list
    path: ./ruleset/GoogleFCM.list
  PayPal:
    <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/LM-Firefly/Rules/master/PROXY/PayPal.list
    path: ./ruleset/PayPal.list
  Epic:
    <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Epic.list
    path: ./ruleset/Epic.list
  Steam:
    <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Steam/Steam.list
    path: ./ruleset/Steam.list
  YouTube:
    <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/YouTube/YouTube.list
    path: ./ruleset/YouTube.list
  Google_Search:
    <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/bunizao/TutuBetterRules/tutu/RuleList/DOMAlN/Google_Search.list
    path: ./ruleset/Google_Search.list
  Netflix:
    <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Netflix.list
    path: ./ruleset/Netflix.list
  BilibiliHMT:
    <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/BilibiliHMT.list
    path: ./ruleset/BilibiliHMT.text
  Bilibili:
    <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Bilibili.list
    path: ./ruleset/Bilibili.list
  ChinaMedia:
    <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ChinaMedia.list
    path: ./ruleset/ChinaMedia.list
  GFW:
    <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/ProxyGFWlist.list
    path: ./ruleset/ProxyGFW.list
  Bahamut:
    <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/Ruleset/Bahamut.list
    path: ./ruleset/Bahamut.list
  OneDrive:
    <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/ACL4SSR/ACL4SSR/master/Clash/OneDrive.list
    path: ./ruleset/OneDrive.list
  Twitter:
    <<: *classical_http_group
    format: text
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Surge/Twitter/Twitter.list
    path: ./ruleset/Twitter.list
  Game:
    <<: *classical_http_group
    url: https://raw.githubusercontent.com/blackmatrix7/ios_rule_script/master/rule/Clash/Game/Game.yaml
    path: ./ruleset/Game.yaml
  ### ä»¥ä¸‹è§„åˆ™å›æºè‡³ @SukkaW 
  Global:
    <<: *domain_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/global.conf
    path: ./ruleset/global.conf
  China:
    <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/domestic.conf
    path: ./ruleset/domestic.conf
  Dirct:
    <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/direct.conf
    path: ./ruleset/direct.conf
  Local:
    <<: *classical_http_group
    format: text
    url: https://ruleset.skk.moe/List/non_ip/lan.conf
    path: ./ruleset/local.conf
  Lan:
    <<: *ipcidr_http_group
    format: text
    url: https://ruleset.skk.moe/List/ip/lan.conf
    path: ./ruleset/lan.conf
  China-IP:
    <<: *ipcidr_http_group
    format: text
    url: https://ruleset.skk.moe/List/ip/china_ip.conf
    path: ./ruleset/china_ip.conf
rules:
  # æ€æƒ³ï¼šç¿»å¢™ä¸»åŠ›å…¨éƒ¨æ˜¯ Topic èŠ‚ç‚¹è¿‡å»ï¼Œå¦‚æœ‰éœ€è¦è‡ªè¡Œæ·»åŠ 
  - RULE-SET,Ad-Domain,AdBlock
  - RULE-SET,Ad-Rule,AdBlock
  - RULE-SET,QUIC-Block,AdBlock
  - RULE-SET,Adobe-Block,AdBlock
  - RULE-SET,OpenAI,OpenAI
  - RULE-SET,AIGC,AIGC
  - RULE-SET,CDN-Domain,Topic
  - RULE-SET,CDN,Topic
  - RULE-SET,PayPal,PayPal
  - RULE-SET,Telegram,Telegram
  - RULE-SET,Netflix,Netflix
  - RULE-SET,Twitter,Twitter
  - RULE-SET,YouTube,Youtube
  - RULE-SET,Google_Search,Youtube
  - RULE-SET,GoogleFCM,Google
  - RULE-SET,Bahamut, ğŸ‡¨ğŸ‡³ å°æ¹¾èŠ‚ç‚¹
  - RULE-SET,Apple-CDN,DIRECT
  - RULE-SET,Apple-CN,DIRECT
  - RULE-SET,Apple,Apple
  - RULE-SET,OneDrive,OneDrive
  - RULE-SET,Microsoft_CDN,DIRECT
  - RULE-SET,Microsoft,Microsoft
  - RULE-SET,Stream,Stream
  # - PROCESS-NAME,r5apex.exe, ğŸ‡­ğŸ‡° HongKong #Steamç‰ˆæœ¬Apexå¯ä»¥æ‰“å¼€
  - RULE-SET,Download-Domain,DIRECT
  - RULE-SET,Download,DIRECT
  - RULE-SET,Epic,GameHub
  - RULE-SET,Steam,GameHub  
  - RULE-SET,Game,GameHub
  - RULE-SET,GFW,Topic
  - RULE-SET,Global,Topic
  - RULE-SET,Speedtest,Speedtest
  - RULE-SET,BilibiliHMT,bilibili
  - RULE-SET,Bilibili,bilibili
  - RULE-SET,ChinaMedia,DIRECT
  - RULE-SET,China,DIRECT
  - RULE-SET,Dirct,DIRECT
  - RULE-SET,Local,DIRECT
  - RULE-SET,Lan,DIRECT
  - RULE-SET,China-IP,DIRECT
  # - GEOIP,CN,DIRECT #æœ‰å¾…å•†æ¦·æ˜¯å¦å¯ç”¨
  - MATCH,Topic
